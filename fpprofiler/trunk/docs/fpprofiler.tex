% This document is ``public domain''. It may be printed and
% distributed free of charge in its original form (including the
% list of authors). If it is changed or if parts of it are used
% within another document, then the author list must include
% all the original authors AND that author (those authors) who
% has (have) made the changes.
%
% Copyright Darius Blaszyk (2007).

\documentclass[twoside]{book}

%===============================================================================
% creating new commands
%===============================================================================
\newcommand{\documenttitle}{Free Pascal Profiler User manual}
\newcommand{\fpp}{Free Pascal Profiler}
\newcommand{\fpprofilerversion}{0.1.0}
\newcommand{\fpprofilerwebsite}{\url{http://www.freepascal.org}}
\newcommand{\authors}{Darius Blaszyk}
\newcommand{\pascalfile}[1]{
  \lstset{language=pascal, frame=single, basicstyle=\ttfamily, showstringspaces=false}
  \lstinputlisting{#1}}

%===============================================================================
% defining packages
%===============================================================================
\usepackage{url}
\usepackage[colorlinks=true,
            linkcolor=black,
            citecolor=darkblue,
            urlcolor=black,
            backref=false,
            a4paper=true,
            bookmarksopen= true,
            bookmarksopenlevel = 0, % -1 = part,    0 = chapter,
                                    %  1 = section, 2 = subsection
            bookmarksnumbered = true,
            plainpages=false,
            draft = false,
            pdftex = true,
            pdfmenubar = true,
            pdftoolbar = true,
            pdfpagelabels = true,
            pdfhighlight=/I,
            pdfstartview=FitH,
            pdftitle={\documenttitle}
            ]{hyperref}
\usepackage{graphicx}
\usepackage{tabularx}
\usepackage{listings}
\usepackage{palatino}

\begin{document}

%===============================================================================
% including all parts of the manual
%===============================================================================
\include{titlepage}                    %document title page
\include{technical_note}               %technical notes
\tableofcontents

\chapter{Introduction}
The \fpp is an effort to create an FPC native profiler, deployable on all platforms and
architectures the Free Pascal compiler itself supports.

\section{About this document}
This is the user manual for \fpp. It describes the
installation and use of \fpp on the different supported
platforms. This document describes \fpp as it is at the time
of writing.

\section{Getting more information}
More information or new releases can be found on the \fpp
site \fpprofilerwebsite.

\section{Getting the sources}
The sources for \fpp are available from SVN here: \url{http://svn.freepascal.org/svn/fpcprojects/fpprofiler/}.

\section{Introduction to profiling}
Profiling is a analysis technique that gives information about how many times a 
function is called and how long each call took. This information is usefull in 
making your application less time critical and more efficient.
It allows you to monitor so called ''hotspots'' in your code and to address them.
And in turn test your new code to see wether or not it improves performance.

\chapter{Free Pascal Profiler}

This chapter describes the structure of the Free Pascal Profiler. Which conists of two 
tools (fpp and fppview) and some units that contain the profiling code that needs to
be linked in. The next sections will describe them more in detail.

\section{fprof}

\section{fpp}

\section{fppview}

\subsection{fppreport}
FPPReport defines the main class TCustomFPPReport whichs has several descendants that 
output in different formats. Currently supported formats are:

\begin{description}
	\item[Plain] Results are written to the console terminal in human readable format. Tables 
	are nicely formatted.
	\item[GraphViz] Graphviz is open source graph visualization software. Graph visualization 
	is a way of representing structural information as diagrams of abstract graphs and networks. 
	Not all statistics support this format.
	\item[Latex] To be implemented.
\end{description}

\subsection{fppstats}

\chapter{Compiling a program for profiling}
Profiling your application requires the insertion of profiling code before compilation. 
To automate the insertion of profiling code the Free Pascal Profile Compiler (FPP) has 
been created. This application takes the same commandline parameters as the Free Pascal Compiler
(FPC) but instead works as a preprocessor and first inserts the required code on the correct places, 
then compiles the application by calling FPC and finally restores the code back to it's original. A more detailed overview of 
what happens is shown in figure x.

\chapter{Executing the program}

\chapter{Analyzing the profiling log}

\subsection{Flat profile}

\subsection{Call graph}



\section{Interpreting the statistics}

\chapter{Implementation details}

\listoftables
\listoffigures
\appendix                              %the appendices start here
\include{fdl}                          %GNU free document license
%===============================================================================

\end{document}
